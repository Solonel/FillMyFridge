<lsc-back-menu></lsc-back-menu>


<div class="form justify-content-around">
    <div *ngIf="!isLoading">
        <form [formGroup]="categoryForm">
            <div class="container">
                <div class="row justify-content-around">

                    <div class="col-6">

                        <mat-slide-toggle formControlName="published"> Publi√© </mat-slide-toggle>

                        <mat-form-field class="example-full-width">
                            <input formControlName="title" matInput placeholder="Titre">
                        </mat-form-field>

                        <mat-form-field class="example-full-width">
                            <input formControlName="description" matInput placeholder="Description">
                        </mat-form-field>

                    </div>
                    <div class="col-6">
                        <div formArrayName="recipes" *ngIf="categoryFormArray">
                            <mat-selection-list #recipesList>
                                <mat-list-option checkboxPosition="before" [value]="recipe" *ngFor="let recipe of categoryFormArray.controls; let idx = index"
                                    [formGroupName]="idx">
                                    <h3 matLine> {{recipe.value.title}} </h3>
                                    <p matLine>
                                        <span> {{recipe.value.description}} </span>
                                    </p>
                                </mat-list-option>
                            </mat-selection-list>
                        </div>
                    </div>
                    <div class="col-12">
                        <div *ngIf="categoryForm.value.id">
                            <button type="button" (click)="save()" class="btn btn-success"> Modifier </button>
                            <button type="button" (click)="delete()" class="btn btn-danger"> Supprimer </button>
                        </div>
                        <div *ngIf="!categoryForm.value.id">
                            <button (click)="addCategory()" type="button" class="btn btn-primary"> Enregistrer </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>